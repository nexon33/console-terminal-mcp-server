<!DOCTYPE html>
<html class="theme-dark">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <title>MCP Terminal</title>
  <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
  <link rel="stylesheet" href="src/css/terminal.css" />
  <style>
    /* Additional styles to ensure proper menu bar behavior */
    body {
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    
    /* Ensure app-menu-bar is properly styled and positioned */
    .app-menu-bar {
      -webkit-app-region: drag;
      position: relative;
      z-index: 100;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Main Application Bar -->
    <div class="app-menu-bar">
      <!-- App Icon and Main Menu Items -->
      <div class="app-menu-section">
        <div class="app-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 7H19V17H5V7Z" stroke="currentColor" stroke-width="2" />
            <path d="M8 11L12 14L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
        </div>

        <!-- Main Menu Items -->
        <div class="menu-item" data-menu="mcp">MCP Terminal</div>
        <div class="menu-item" data-menu="terminal">Terminal</div>
        <div class="menu-item" data-menu="edit">Edit</div>
        <div class="menu-item" data-menu="view">View</div>
        <div class="menu-item" data-menu="window">Window</div>
        <div class="menu-item" data-menu="help">Help</div>
      </div>

      <!-- Spacer to push window controls to right -->
      <div class="flex-spacer"></div>

      <!-- Tab Controls -->
      <div class="tab-controls">
        <button id="new-tab-btn" class="tab-control-button" title="New Tab">+</button>
        <button id="trash-btn" class="tab-control-button" title="Close Current Tab">
          <svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2 4H14M6 4V12M10 4V12M3 4L4 12H12L13 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
        <button id="next-tab-btn" class="tab-control-button" title="Next Tab">→</button>
      </div>

      <!-- Window Controls -->
      <div class="window-controls">
        <button id="minimize-btn" class="window-control minimize">
          <svg width="10" height="10" viewBox="0 0 10 10">
            <rect x="1" y="4.5" width="8" height="1" fill="currentColor"/>
          </svg>
        </button>
        <button id="maximize-btn" class="window-control maximize">
          <svg width="10" height="10" viewBox="0 0 10 10">
            <rect x="1.5" y="1.5" width="7" height="7" stroke="currentColor" fill="none" stroke-width="1"/>
          </svg>
        </button>
        <button id="close-btn" class="window-control close">
          <svg width="10" height="10" viewBox="0 0 10 10">
            <path d="M1.5 1.5L8.5 8.5M8.5 1.5L1.5 8.5" stroke="currentColor" stroke-width="1.1"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Tabs Bar -->
    <div id="tabs" class="tabs">
      <!-- Tabs will be generated here dynamically -->
      <button id="new-tab-button" class="new-tab-button" title="New Tab">+</button>
    </div>

    <!-- Terminal Container -->
    <div id="terminals-container" class="terminals-container">
      <!-- Terminal instances will be created here dynamically -->
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-items-left">
        <div id="session-id" class="status-item">Session ID: Connecting...</div>
      </div>
      <div class="status-items-right">
        <div id="terminal-size" class="status-item">80×24</div>
      </div>
    </div>
  </div>

  <!-- Dropdown Menus -->
  <div id="dropdown-menus">
    <!-- MCP Terminal Menu -->
    <div id="mcp-menu" class="dropdown-menu" data-parent="mcp">
      <div class="dropdown-item" id="menu-new-window">
        <span class="menu-text">New Window</span>
        <span class="menu-shortcut">Ctrl+Shift+N</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-settings">
        <span class="menu-text">Settings</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-exit">
        <span class="menu-text">Exit</span>
        <span class="menu-shortcut">Alt+F4</span>
      </div>
    </div>
    
    <!-- Terminal Menu -->
    <div id="terminal-menu" class="dropdown-menu" data-parent="terminal">
      <div class="dropdown-item" id="menu-new-tab">
        <span class="menu-text">New Tab</span>
        <span class="menu-shortcut">Ctrl+Shift+T</span>
      </div>
      <div class="dropdown-item" id="menu-close-tab">
        <span class="menu-text">Close Tab</span>
        <span class="menu-shortcut">Ctrl+W</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-clear">
        <span class="menu-text">Clear Terminal</span>
        <span class="menu-shortcut">Ctrl+K</span>
      </div>
      <div class="dropdown-item" id="menu-reset">
        <span class="menu-text">Reset Terminal</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-send-output">
        <span class="menu-text">Send Output Now</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-next-tab">
        <span class="menu-text">Next Tab</span>
        <span class="menu-shortcut">Ctrl+Tab</span>
      </div>
      <div class="dropdown-item" id="menu-prev-tab">
        <span class="menu-text">Previous Tab</span>
        <span class="menu-shortcut">Ctrl+Shift+Tab</span>
      </div>
    </div>
    
    <!-- Edit Menu -->
    <div id="edit-menu" class="dropdown-menu" data-parent="edit">
      <div class="dropdown-item" id="menu-copy">
        <span class="menu-text">Copy</span>
        <span class="menu-shortcut">Ctrl+C</span>
      </div>
      <div class="dropdown-item" id="menu-paste">
        <span class="menu-text">Paste</span>
        <span class="menu-shortcut">Ctrl+V</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-select-all">
        <span class="menu-text">Select All</span>
        <span class="menu-shortcut">Ctrl+A</span>
      </div>
      <div class="dropdown-item" id="menu-find">
        <span class="menu-text">Find</span>
        <span class="menu-shortcut">Ctrl+F</span>
      </div>
    </div>
    
    <!-- View Menu -->
    <div id="view-menu" class="dropdown-menu" data-parent="view">
      <div class="dropdown-item" id="menu-toggle-theme">
        <span class="menu-text">Toggle Theme</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-increase-font">
        <span class="menu-text">Increase Font Size</span>
        <span class="menu-shortcut">Ctrl++</span>
      </div>
      <div class="dropdown-item" id="menu-decrease-font">
        <span class="menu-text">Decrease Font Size</span>
        <span class="menu-shortcut">Ctrl+-</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-toggle-menu-bar">
        <span class="menu-text">Toggle Menu Bar</span>
        <span class="menu-shortcut">Alt</span>
      </div>
    </div>
    
    <!-- Window Menu -->
    <div id="window-menu" class="dropdown-menu" data-parent="window">
      <div class="dropdown-item" id="menu-fullscreen">
        <span class="menu-text">Toggle Fullscreen</span>
        <span class="menu-shortcut">F11</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item submenu-trigger" data-submenu="developer-tools">
        <span class="menu-text">Developer Tools</span>
        <span class="submenu-arrow">▶</span>
      </div>
    </div>
    
    <!-- Developer Tools Submenu -->
    <div id="developer-tools-menu" class="dropdown-menu submenu" data-parent="developer-tools">
      <div class="dropdown-item" id="menu-toggle-dev-tools">
        <span class="menu-text">Toggle Developer Tools</span>
        <span class="menu-shortcut">F12</span>
      </div>
      <div class="dropdown-item" id="menu-reload">
        <span class="menu-text">Reload Window</span>
        <span class="menu-shortcut">Ctrl+R</span>
      </div>
      <div class="dropdown-item" id="menu-force-reload">
        <span class="menu-text">Force Reload</span>
        <span class="menu-shortcut">Ctrl+Shift+R</span>
      </div>
    </div>
    
    <!-- Help Menu -->
    <div id="help-menu" class="dropdown-menu" data-parent="help">
      <div class="dropdown-item" id="menu-keyboard-shortcuts">
        <span class="menu-text">Keyboard Shortcuts</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-about">
        <span class="menu-text">About MCP Terminal</span>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="context-menu" class="context-menu">
    <div class="context-menu-item" data-action="copy">
      <span class="menu-text">Copy</span>
    </div>
    <div class="context-menu-item" data-action="paste">
      <span class="menu-text">Paste</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="clear">
      <span class="menu-text">Clear</span>
    </div>
    <div class="context-menu-item" data-action="send-output">
      <span class="menu-text">Send Output Now</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="new-tab">
      <span class="menu-text">New Tab</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="dev-tools">
      <span class="menu-text">Inspect Element</span>
    </div>
  </div>

  <!-- Search Panel -->
  <div id="search-panel" class="search-panel">
    <input type="text" id="search-input" placeholder="Find in terminal..." />
    <div class="search-controls">
      <button id="search-prev-btn" title="Previous match">◀</button>
      <button id="search-next-btn" title="Next match">▶</button>
      <button id="search-close-btn" title="Close">✕</button>
    </div>
  </div>

  <script src="node_modules/xterm/lib/xterm.js"></script>
  <script src="node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
  <script src="node_modules/xterm-addon-search/lib/xterm-addon-search.js"></script>
  <script src="node_modules/xterm-addon-web-links/lib/xterm-addon-web-links.js"></script>
  <script src="node_modules/xterm-addon-serialize/lib/xterm-addon-serialize.js"></script>
  <script src="src/js/terminal.js"></script>
</body>
</html>

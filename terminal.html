<!DOCTYPE html>
<html class="theme-dark">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <title>MCP Terminal</title>
  <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
  <link rel="stylesheet" href="src/css/terminal.css" />
</head>
<body>
  <div class="app-container">
    <!-- Unified Header Bar -->
    <div class="unified-header">
      <div class="app-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5 7H19V17H5V7Z" stroke="currentColor" stroke-width="2" />
          <path d="M8 11L12 14L16 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </div>
      <div class="app-title">MCP Terminal</div>

      <!-- Menu Items (Optional) -->
      <div class="menu-bar">
        <div class="menu-item" data-menu="terminal">Terminal</div>
        <div class="menu-item" data-menu="help">Help</div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button id="new-tab-btn" class="action-button" title="New Terminal (Ctrl+Shift+N)">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
        <button id="clear-btn" class="action-button" title="Clear Terminal (Ctrl+K)">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2 4H14M6 4V12M10 4V12M3 4L4 12H12L13 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
        <button id="send-output-btn" class="action-button" title="Send Current Output">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 8h14M8 1l7 7-7 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <!-- Header Spacer to push window controls to the right -->
      <div class="header-spacer"></div>

      <!-- Window Controls -->
      <div class="window-controls">
        <button id="minimize-btn" class="window-control minimize">
          <svg width="10" height="10" viewBox="0 0 10 10">
            <rect x="1" y="4.5" width="8" height="1" fill="currentColor"/>
          </svg>
        </button>
        <button id="maximize-btn" class="window-control maximize">
          <svg width="10" height="10" viewBox="0 0 10 10">
            <rect x="1.5" y="1.5" width="7" height="7" stroke="currentColor" fill="none" stroke-width="1"/>
          </svg>
        </button>
        <button id="close-btn" class="window-control close">
          <svg width="10" height="10" viewBox="0 0 10 10">
            <path d="M1.5 1.5L8.5 8.5M8.5 1.5L1.5 8.5" stroke="currentColor" stroke-width="1.1"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Tabs Bar -->
    <div id="tabs" class="tabs">
      <!-- Tabs will be generated here dynamically -->
      <button id="new-tab-button" class="new-tab-button" title="New Tab">+</button>
    </div>

    <!-- Terminal Container -->
    <div id="terminals-container" class="terminals-container">
      <!-- Terminal instances will be created here dynamically -->
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-items-left">
        <div id="terminal-info" class="status-item">Session ID: Connecting...</div>
      </div>
      <div class="status-items-right">
        <div id="terminal-size" class="status-item">80√ó24</div>
      </div>
    </div>
  </div>

  <!-- Dropdown Menus -->
  <div id="dropdown-menus">
    <!-- Terminal Menu -->
    <div id="terminal-menu" class="dropdown-menu" data-parent="terminal">
      <div class="dropdown-item" id="menu-new-tab">
        <span class="menu-icon">+</span>
        <span class="menu-text">New Tab</span>
        <span class="menu-shortcut">Ctrl+Shift+T</span>
      </div>
      <div class="dropdown-item" id="menu-clear">
        <span class="menu-icon">üóëÔ∏è</span>
        <span class="menu-text">Clear Terminal</span>
        <span class="menu-shortcut">Ctrl+K</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-send-output">
        <span class="menu-icon">‚û§</span>
        <span class="menu-text">Send Output Now</span>
      </div>
      <div class="dropdown-separator"></div>
      <div class="dropdown-item" id="menu-next-tab">
        <span class="menu-icon">‚ñ∂</span>
        <span class="menu-text">Next Tab</span>
        <span class="menu-shortcut">Ctrl+Tab</span>
      </div>
      <div class="dropdown-item" id="menu-prev-tab">
        <span class="menu-icon">‚óÄ</span>
        <span class="menu-text">Previous Tab</span>
        <span class="menu-shortcut">Ctrl+Shift+Tab</span>
      </div>
    </div>
    
    <!-- Help Menu -->
    <div id="help-menu" class="dropdown-menu" data-parent="help">
      <div class="dropdown-item" id="menu-keyboard-shortcuts">
        <span class="menu-icon">‚å®Ô∏è</span>
        <span class="menu-text">Keyboard Shortcuts</span>
      </div>
      <div class="dropdown-item" id="menu-about">
        <span class="menu-icon">‚ÑπÔ∏è</span>
        <span class="menu-text">About</span>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="context-menu" class="context-menu">
    <div class="context-menu-item" data-action="copy">
      <span class="menu-icon">üìã</span>
      <span class="menu-text">Copy</span>
    </div>
    <div class="context-menu-item" data-action="paste">
      <span class="menu-icon">üìã</span>
      <span class="menu-text">Paste</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="clear">
      <span class="menu-icon">üóëÔ∏è</span>
      <span class="menu-text">Clear</span>
    </div>
    <div class="context-menu-item" data-action="send-output">
      <span class="menu-icon">‚û§</span>
      <span class="menu-text">Send Output Now</span>
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="new-tab">
      <span class="menu-icon">+</span>
      <span class="menu-text">New Tab</span>
    </div>
  </div>

  <script src="node_modules/xterm/lib/xterm.js"></script>
  <script src="node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
  <script src="node_modules/xterm-addon-search/lib/xterm-addon-search.js"></script>
  <script src="node_modules/xterm-addon-web-links/lib/xterm-addon-web-links.js"></script>
  <script src="node_modules/xterm-addon-serialize/lib/xterm-addon-serialize.js"></script>
  <script src="src/js/terminal.js"></script>
</body>
</html>
